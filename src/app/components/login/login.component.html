<div class="flex">
  <div class="w-1/2 p-2 mb-4">
    <form
      [formGroup]="form"
      (ngSubmit)="onSubmit()"
      class="max-w-sm mx-auto p-4 bg-white shadow-md rounded-md"
      novalidate
    >
      <h1 class="text-[47px] font-bold mb-4">Регистрация</h1>
      <p class="mb-10 text-gray-500 text-lg">
        Пожалуйста, выберите тип аккаунта, который Вы хотите создать
      </p>

      <label for="account-type" hlmLabel class="block mb-2 text-gray-700">
        Тип аккаунта:</label
      >
      <app-dropdown></app-dropdown>

      <div class="mb-4">
        <label for="phone" hlmLabel class="block mb-2 text-gray-700">
          Номер телефона:
        </label>
        <app-telephone-input
          (phoneChange)="onPhoneChange($event)"
        ></app-telephone-input>
        <div
          *ngIf="formSubmitted && form.controls['phone'].invalid"
          class="text-red-500 text-sm mt-1"
        >
          <small *ngIf="form.controls['phone'].hasError('required')"
            >Это поле обязательно для заполнения.</small
          >
          <small *ngIf="form.controls['phone'].hasError('invalidPhone')"
            >Введите корректный номер телефона.</small
          >
        </div>
      </div>

      <div
        class="mb-4 relative password-input-wrapper"
        style="min-height: 80px"
      >
        <label for="password" hlmLabel class="block mb-2 text-gray-700">
          Пароль (6 символов и латинские буквы):
        </label>
        <div class="relative">
          <input
            formControlName="password"
            [type]="passwordVisible ? 'text' : 'password'"
            class="w-full px-3 py-2 border border-gray-300 rounded-md transition-colors duration-300 ease-in-out"
            required
            autocomplete="off"
            [ngClass]="{
              valid:
                form.controls['password'].valid &&
                form.controls['password'].touched,
              invalid:
                form.controls['password'].invalid &&
                form.controls['password'].touched
            }"
          />
          <img
            *ngIf="!passwordVisible"
            src="assets/icons/eye.svg"
            alt="Show password"
            width="24"
            height="24"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer"
            (click)="togglePasswordVisibility('password')"
          />
          <img
            *ngIf="passwordVisible"
            src="assets/icons/eye-off.svg"
            alt="Hide password"
            width="24"
            height="24"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer"
            (click)="togglePasswordVisibility('password')"
          />
        </div>
        <div
          *ngIf="formSubmitted && form.controls['password'].invalid"
          class="text-red-500 text-sm mt-1"
        >
          <small *ngIf="form.controls['password'].hasError('required')"
            >Это поле обязательно для заполнения.</small
          >
          <small *ngIf="form.controls['password'].hasError('minlength')"
            >Пароль должен быть не менее 6 символов.</small
          >
        </div>
      </div>

      <div
        class="mb-4 relative password-input-wrapper"
        style="min-height: 80px"
      >
        <label for="confirmPassword" hlmLabel class="block mb-2 text-gray-700">
          Повторите пароль:
        </label>
        <div class="relative">
          <input
            formControlName="confirmPassword"
            [type]="confirmPasswordVisible ? 'text' : 'password'"
            class="w-full px-3 py-2 border border-gray-300 rounded-md transition-colors duration-300 ease-in-out"
            required
            autocomplete="off"
            [ngClass]="{
              valid:
                form.controls['confirmPassword'].valid &&
                form.controls['confirmPassword'].touched,
              invalid:
                form.controls['confirmPassword'].invalid &&
                form.controls['confirmPassword'].touched
            }"
          />
          <img
            *ngIf="!confirmPasswordVisible"
            src="assets/icons/eye.svg"
            alt="Show confirm password"
            width="24"
            height="24"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer"
            (click)="togglePasswordVisibility('confirmPassword')"
          />
          <img
            *ngIf="confirmPasswordVisible"
            src="assets/icons/eye-off.svg"
            alt="Hide confirm password"
            width="24"
            height="24"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer"
            (click)="togglePasswordVisibility('confirmPassword')"
          />
        </div>
        <div
          *ngIf="formSubmitted && form.hasError('mismatch')"
          class="text-red-500 text-sm mt-1"
        >
          <small>Пароли не совпадают.</small>
        </div>
      </div>

      <div class="mb-4 flex items-center">
        <input
          type="checkbox"
          id="remember"
          name="remember"
          hlmInput
          class="mr-2"
        />
        <label for="remember" hlmLabel class="text-gray-700">
          Запомнить меня
        </label>
      </div>

      <button
        type="submit"
        hlmBtn
        variant="outline"
        class="w-full bg-green-400 text-white py-2 rounded-md hover:bg-green-600"
      >
        Зарегистрироваться
      </button>
    </form>

    <p class="max-w-sm mx-auto my-0 w-1/2 p-1 mt-1 text-xs">
      У Вас уже есть аккаунт? Тогда
      <a href="#" class="font-bold">Войдите в свой профиль</a>
    </p>
    <p class="max-w-sm mx-auto my-0 w-1/2 p-1 mt-14 text-xs">
      Ознакомиться с
      <a href="#" class="font-bold"
        >Политикой конфиденциальности и Условиями предоставления услуг</a
      >
    </p>
  </div>

  <div class="flex items-center">
    <div class="w-1/4 bg-white flex flex-col items-center">
      <button
        class="px-3 py-2 text-black-500 hover:bg-black-500 hover:text-green transition-colors"
        (click)="onPrevClick()"
      >
        <svg
          class="w-6 h-6 rotate-90"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          ></path>
        </svg>
      </button>

      <div
        class="flex flex-col items-center space-y-2 overflow-hidden max-h-80"
        id="pagination"
      >
        <div
          class="flex flex-col transition-transform duration-300"
          id="paginationContent"
        >
          <span
            *ngFor="let photo of photos; let i = index"
            (click)="onSelectPhoto(i)"
            [ngClass]="{
              'bg-green-300 text-white': currentIndex === i,
              'bg-white text-black': currentIndex !== i
            }"
            class="w-10 h-10 flex items-center justify-center border border-transparent hover:border-gray-300 hover:bg-green-300 hover:rounded-sm transition-colors mx-1 cursor-pointer"
          >
            {{ photo.id }}
          </span>
        </div>
      </div>

      <button
        class="px-3 py-2 text-black-500 hover:bg-black-500 hover:text-green transition-colors"
        (click)="onNextClick()"
      >
        <svg
          class="w-6 h-6 -rotate-90"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          ></path>
        </svg>
      </button>
    </div>
  </div>

  <div class="absolute top-0 right-40 w-1/4 p-4 flex flex-col space-y-4">
    <div
      *ngFor="let photo of photos; let i = index"
      [ngClass]="{
        'border-2 border-green-500': currentIndex === i
      }"
      class="relative rounded-lg shadow-lg h-64 transition-transform duration-300"
      [class]="'img-container-' + (i + 1)"
      [style.transform]="'translateY(-' + currentIndex * 100 + '%)'"
    >
      <div
        class="absolute top-2 left-2 bg-white border border-gray-300 text-black px-2 py-1 rounded-md text-xs"
      >
        {{ photo.id }}
      </div>
      <div
        class="absolute bottom-2 right-2 bg-white border border-gray-300 text-black px-2 py-1 rounded-md text-xs"
      >
        {{ photo.caption }}
      </div>
    </div>
  </div>
</div>
